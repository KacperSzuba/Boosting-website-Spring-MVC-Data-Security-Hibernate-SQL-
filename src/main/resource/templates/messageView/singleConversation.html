<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
      lang="en">    <head>
        <title>Single conversation</title>
    </head>
    <body>
        <nav>
            <ul>
                <li sec:authorize="hasAnyRole('USER','ADMIN','BOOSTER')">
                    <a href="/account">Account page</a>
                </li>
                <li sec:authorize="hasRole('BOOSTER')">
                    <a href="/booster">Booster page</a>
                </li>
                <li>
                    <a href="/order/">Order page</a>
                </li>
            </ul>
        </nav>
        <h1>Single Conversation</h1>

        <div id="test1"></div>
        <script>
            const xhr = new XMLHttpRequest();
            xhr.onload = function () {
                if(this.status === 200){
                    const conversation = JSON.parse(this.responseText);
                    console.log(conversation);
                    for (var i = 0; i < conversation.length; i++){
                        var singleMessage = document.createElement("div");
                        singleMessage.innerHTML = conversation[i]['sendMessage'];
                        singleMessage.setAttribute("class","sendMessage");
                        singleMessage.setAttribute("id","sendMessage"+i);
                        var initialDiv = document.getElementById('test1');
                        document.body.insertBefore(singleMessage,initialDiv);
                        if(conversation[i]['messageSender']===4){
                            document.getElementById("sendMessage"+i).style.textAlign = "right";
                        }
                        else {
                            document.getElementById("sendMessage"+i).style.textAlign = "left";
                        }
                        //   document.getElementById('test1').innerHTML = new Date(res[20]['date']); //.getHours();
                    }
                    //document.getElementById('test1').remove();
                }
            }
            xhr.open('GET','http://localhost:8090/sendMessage/singleConversation/Message',true);
            xhr.send();
        </script>
    </body>
</html>